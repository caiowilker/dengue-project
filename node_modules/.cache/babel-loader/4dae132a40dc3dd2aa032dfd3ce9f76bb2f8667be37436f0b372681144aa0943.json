{"ast":null,"code":"// src/services/firebaseService.js\nimport { db } from '../firebase';\nimport { collection, addDoc, query, where, getDocs, Timestamp } from 'firebase/firestore';\n\n// Adiciona um novo relato ao Firestore\nexport const addRelato = async relato => {\n  try {\n    await addDoc(collection(db, 'relatos'), {\n      descricao: relato.descricao,\n      data: Timestamp.fromDate(new Date()),\n      // Armazenando a data atual como Timestamp\n      localizacao: relato.localizacao\n    });\n  } catch (error) {\n    console.error(\"Erro ao adicionar relato: \", error);\n    throw error; // Re-lança o erro para tratamento\n  }\n};\n\n// Obtém todos os relatos do Firestore\nexport const getRelatos = async () => {\n  const relatosCollection = collection(db, 'relatos');\n  const querySnapshot = await getDocs(relatosCollection);\n  return querySnapshot.docs.map(doc => ({\n    id: doc.id,\n    ...doc.data()\n  }));\n};\n\n// Busca relatos dentro de um intervalo de datas\nexport const buscarRelatosPorIntervaloDeDatas = async (dataInicio, dataFim) => {\n  const relatosCollection = collection(db, 'relatos');\n\n  // Convertendo strings em objetos Date\n  const inicio = Timestamp.fromDate(new Date(dataInicio));\n  const fim = Timestamp.fromDate(new Date(dataFim));\n\n  // Monta a consulta para buscar relatos dentro do intervalo de datas\n  const q = query(relatosCollection, where(\"data\", \">=\", inicio), where(\"data\", \"<=\", fim));\n  const querySnapshot = await getDocs(q);\n  return querySnapshot.docs.map(doc => ({\n    id: doc.id,\n    ...doc.data()\n  }));\n};","map":{"version":3,"names":["db","collection","addDoc","query","where","getDocs","Timestamp","addRelato","relato","descricao","data","fromDate","Date","localizacao","error","console","getRelatos","relatosCollection","querySnapshot","docs","map","doc","id","buscarRelatosPorIntervaloDeDatas","dataInicio","dataFim","inicio","fim","q"],"sources":["C:/Users/Família/Documents/dengue-project/src/services/firebaseService.js"],"sourcesContent":["// src/services/firebaseService.js\r\nimport { db } from '../firebase';\r\nimport { collection, addDoc, query, where, getDocs, Timestamp } from 'firebase/firestore';\r\n\r\n// Adiciona um novo relato ao Firestore\r\nexport const addRelato = async (relato) => {\r\n    try {\r\n        await addDoc(collection(db, 'relatos'), {\r\n            descricao: relato.descricao,\r\n            data: Timestamp.fromDate(new Date()), // Armazenando a data atual como Timestamp\r\n            localizacao: relato.localizacao\r\n        });\r\n    } catch (error) {\r\n        console.error(\"Erro ao adicionar relato: \", error);\r\n        throw error; // Re-lança o erro para tratamento\r\n    }\r\n};\r\n\r\n// Obtém todos os relatos do Firestore\r\nexport const getRelatos = async () => {\r\n    const relatosCollection = collection(db, 'relatos');\r\n    const querySnapshot = await getDocs(relatosCollection);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n};\r\n\r\n// Busca relatos dentro de um intervalo de datas\r\nexport const buscarRelatosPorIntervaloDeDatas = async (dataInicio, dataFim) => {\r\n    const relatosCollection = collection(db, 'relatos');\r\n\r\n    // Convertendo strings em objetos Date\r\n    const inicio = Timestamp.fromDate(new Date(dataInicio));\r\n    const fim = Timestamp.fromDate(new Date(dataFim));\r\n\r\n    // Monta a consulta para buscar relatos dentro do intervalo de datas\r\n    const q = query(relatosCollection,\r\n        where(\"data\", \">=\", inicio),\r\n        where(\"data\", \"<=\", fim)\r\n    );\r\n\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n};\r\n"],"mappings":"AAAA;AACA,SAASA,EAAE,QAAQ,aAAa;AAChC,SAASC,UAAU,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,SAAS,QAAQ,oBAAoB;;AAEzF;AACA,OAAO,MAAMC,SAAS,GAAG,MAAOC,MAAM,IAAK;EACvC,IAAI;IACA,MAAMN,MAAM,CAACD,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC,EAAE;MACpCS,SAAS,EAAED,MAAM,CAACC,SAAS;MAC3BC,IAAI,EAAEJ,SAAS,CAACK,QAAQ,CAAC,IAAIC,IAAI,CAAC,CAAC,CAAC;MAAE;MACtCC,WAAW,EAAEL,MAAM,CAACK;IACxB,CAAC,CAAC;EACN,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;IAClD,MAAMA,KAAK,CAAC,CAAC;EACjB;AACJ,CAAC;;AAED;AACA,OAAO,MAAME,UAAU,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAMC,iBAAiB,GAAGhB,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC;EACnD,MAAMkB,aAAa,GAAG,MAAMb,OAAO,CAACY,iBAAiB,CAAC;EACtD,OAAOC,aAAa,CAACC,IAAI,CAACC,GAAG,CAACC,GAAG,KAAK;IAAEC,EAAE,EAAED,GAAG,CAACC,EAAE;IAAE,GAAGD,GAAG,CAACX,IAAI,CAAC;EAAE,CAAC,CAAC,CAAC;AACzE,CAAC;;AAED;AACA,OAAO,MAAMa,gCAAgC,GAAG,MAAAA,CAAOC,UAAU,EAAEC,OAAO,KAAK;EAC3E,MAAMR,iBAAiB,GAAGhB,UAAU,CAACD,EAAE,EAAE,SAAS,CAAC;;EAEnD;EACA,MAAM0B,MAAM,GAAGpB,SAAS,CAACK,QAAQ,CAAC,IAAIC,IAAI,CAACY,UAAU,CAAC,CAAC;EACvD,MAAMG,GAAG,GAAGrB,SAAS,CAACK,QAAQ,CAAC,IAAIC,IAAI,CAACa,OAAO,CAAC,CAAC;;EAEjD;EACA,MAAMG,CAAC,GAAGzB,KAAK,CAACc,iBAAiB,EAC7Bb,KAAK,CAAC,MAAM,EAAE,IAAI,EAAEsB,MAAM,CAAC,EAC3BtB,KAAK,CAAC,MAAM,EAAE,IAAI,EAAEuB,GAAG,CAC3B,CAAC;EAED,MAAMT,aAAa,GAAG,MAAMb,OAAO,CAACuB,CAAC,CAAC;EACtC,OAAOV,aAAa,CAACC,IAAI,CAACC,GAAG,CAACC,GAAG,KAAK;IAAEC,EAAE,EAAED,GAAG,CAACC,EAAE;IAAE,GAAGD,GAAG,CAACX,IAAI,CAAC;EAAE,CAAC,CAAC,CAAC;AACzE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}